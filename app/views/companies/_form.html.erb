<div class="form-group">
  <%= form_for(@company) do |company| %>
    <% if @company.errors.any? %>
      <!-- FIXME Move this error_message thing in different partial -->
      <div id="error_explanation">
        <h2>
          <%= pluralize(@company.errors.count, "error") %> prohibited this company from being saved:
        </h2>

        <ul>
          <% if !@company.errors[:name].blank? %>
            <li><%= @company.errors.full_messages_for(:name).join('and') %></li>
          <% end %>
          <% if !@company.errors[:users].blank?%>
            <li>Owner Error</li>
            <ul>
              <% @company.users.first.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= company.label :company_name %><br>
      <%= company.text_field :name %>
    </div>
    <div class="field">
      <%= company.label :owner_name %><br>
      <%= company.text_field :owner_name %>
    </div>
    <div class="field">
      <%= company.label :owner_email %><br>
      <%= company.text_field :owner_email %>
    </div>
    <div class="actions">
      <%= company.submit %>
    </div>
  <% end %>
</div>
